
my $Bin1 = "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001100111000000000000000000000000000000000111111000010000001100101111111111101111111010111111111010000000000000000000000000000000001011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001011111010111110101111101010000010111110101001101011111010111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100101101001010101100011011001010110000001100000111001000101000000000000011000111010010001100000001000000011100000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000001011110010000100001011111000000011000101010000011010110010100000000001101010100001000000000000000000000001001111101100000001001000000001000001011100010111010101000101000000100000001000101011000000000000000000111111000101110000011100001110001001100101001000110100001110000000000010000000010000000";

my $Bin = "00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001011001100000000000000000000000000000000111111000010000001100101111111111101111111010111111111010000000000000000000000000000000010101100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000001001110100111101101100100101101100011100101110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100101101001010101100011011001010110000001100000111000000111100000000000011000111010010001100000001000011111100000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000010010010010000100001011111000000011000101010000011010110010100000000001101010100001000000000000000000000001001111101100000000100000000001000001011100010111010101000101000000100000001001000011100000000000000000111111000101110000011100001110001001100101001000110100001110000000000010000000010000000";

my $Debug = 0;
my %HexBin = (
                "0" => "0000",
                "1" => "0001",
                "2" => "0010",
                "3" => "0011",
                "4" => "0100",
                "5" => "0101",
                "6" => "0110",
                "7" => "0111",
                "8" => "1000",
                "9" => "1001",
                "A" => "1010",
                "B" => "1011",
                "C" => "1100",
                "D" => "1101",
                "E" => "1110",
                "F" => "1111",
                "m" => "MMMM",
                "p" => "PPPP",
                "s" => "SSSS",
                "u" => "UUUU",
                "x" => "XXXX",
                "M" => "mmmm",
                "P" => "pppp",
                "S" => "ssss",
                "U" => "uuuu",
                "X" => "xxxx"
        );

my %BinHex = (
                "0000" => "0",
                "0001" => "1",
                "0010" => "2",
                "0011" => "3",
                "0100" => "4",
                "0101" => "5",
                "0110" => "6",
                "0111" => "7",
                "1000" => "8",
                "1001" => "9",
                "1010" => "A",
                "1011" => "B",
                "1100" => "C",
                "1101" => "D",
                "1110" => "E",
                "1111" => "F",
                "MMMM" => "m",
                "PPPP" => "p",
                "SSSS" => "s",
                "UUUU" => "u",
                "XXXX" => "x",
                "mmmm" => "m",
                "pppp" => "p",
                "ssss" => "s",
                "uuuu" => "u",
                "xxxx" => "x"
        );


&BinaryToHex($Bin);

# FuseRead display on the console is reverse
# Input is from MSB shift in TDI, shift out LSB
sub BinaryToHex
{
	my $StrBinaries = shift;	
	my $TotalBinary = length ($StrBinaries);
	
	if (0 == ($TotalBinary % 4))
	{
		my $Binary = "";                                          
		my $StrHex = "";
		
		my @Bits = split (//, $StrBinaries);
		for (my $i=$#Bits; $i>=0; $i--)
		{
			push (@RevBits, $Bits[$i]);
		}		

		my $Cnt = 1;
	
		foreach my $Bit (@RevBits)
		{
			if ($Cnt % 4 == 0)
			{
				$Binary .= $Bit;
				$StrHex .= $BinHex{$Binary};
				print "$Binary :: $BinHex{$Binary} :: $Cnt\n" if ($Debug == 0);
				$Binary = "";
			}
			else
			{			
				$Binary .= $Bit;
			}
			$Cnt++;
		}
	
		if ((($#RevBits + 1)/4) != length ($StrHex))
		{
			print "ERROR: Binary conversion doesn't match, pls check $#Bits\n";
		}
		
		print "$StrHex\n" . length ($StrHex) . "\n" if ($Debug == 1);
		print "$StrHex\n";

	}
	else
	{
		print "ERROR: Parse binary doen't match length conversion - $TotalBinary\n";
	}
}





